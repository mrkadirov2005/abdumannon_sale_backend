<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Web Development Fundamentals - HTML, CSS & JavaScript Lesson</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            overflow: hidden;
        }

        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px 30px;
            text-align: center;
        }

        header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .content {
            padding: 40px;
        }

        .section {
            margin-bottom: 40px;
            animation: slideIn 0.6s ease-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        h2 {
            color: #667eea;
            font-size: 1.8em;
            margin-bottom: 15px;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
        }

        h3 {
            color: #764ba2;
            font-size: 1.4em;
            margin-top: 25px;
            margin-bottom: 15px;
        }

        p {
            line-height: 1.8;
            margin-bottom: 15px;
            font-size: 1em;
        }

        .code-block {
            background: #f5f7fa;
            border-left: 4px solid #667eea;
            padding: 15px;
            margin: 20px 0;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            overflow-x: auto;
            font-size: 0.95em;
            line-height: 1.6;
        }

        .code-block code {
            color: #2c3e50;
        }

        .highlight {
            background: #ffd93d;
            padding: 2px 6px;
            border-radius: 3px;
            font-weight: bold;
        }

        .feature-list {
            list-style: none;
            margin: 20px 0;
        }

        .feature-list li {
            padding: 12px;
            margin: 10px 0;
            background: #f0f4ff;
            border-left: 4px solid #667eea;
            border-radius: 5px;
            transition: all 0.3s ease;
        }

        .feature-list li:hover {
            background: #e8eef8;
            transform: translateX(10px);
        }

        .feature-list strong {
            color: #667eea;
        }

        .comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }

        .comparison-box {
            background: #f9f9f9;
            padding: 20px;
            border-radius: 8px;
            border: 2px solid #e0e0e0;
        }

        .comparison-box.public {
            border-color: #27ae60;
            background: #f0fdf4;
        }

        .comparison-box.protected {
            border-color: #e74c3c;
            background: #fef2f2;
        }

        .comparison-box h4 {
            color: #333;
            margin-bottom: 10px;
            font-size: 1.2em;
        }

        .badge {
            display: inline-block;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: bold;
            margin-right: 10px;
        }

        .badge.public {
            background: #27ae60;
            color: white;
        }

        .badge.protected {
            background: #e74c3c;
            color: white;
        }

        .diagram {
            background: #f9f9f9;
            border: 2px solid #ddd;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            text-align: center;
            font-family: 'Courier New', monospace;
        }

        .arrow {
            margin: 10px 0;
            color: #667eea;
            font-weight: bold;
            font-size: 1.5em;
        }

        .table-wrapper {
            overflow-x: auto;
            margin: 20px 0;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
        }

        th {
            background: #667eea;
            color: white;
            padding: 12px;
            text-align: left;
            font-weight: bold;
        }

        td {
            padding: 12px;
            border-bottom: 1px solid #ddd;
        }

        tr:hover {
            background: #f5f7fa;
        }

        .interactive-section {
            background: #f0f4ff;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }

        .toggle-button {
            background: #667eea;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s ease;
            margin: 5px;
        }

        .toggle-button:hover {
            background: #764ba2;
            transform: scale(1.05);
        }

        .hidden {
            display: none;
        }

        .tip {
            background: #e8f5e9;
            border-left: 4px solid #27ae60;
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
        }

        .tip strong {
            color: #27ae60;
        }

        .warning {
            background: #fff3e0;
            border-left: 4px solid #f39c12;
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
        }

        .warning strong {
            color: #f39c12;
        }

        footer {
            background: #f5f7fa;
            padding: 20px;
            text-align: center;
            border-top: 1px solid #ddd;
            color: #666;
        }

        .flow-chart {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin: 30px 0;
            flex-wrap: wrap;
            gap: 10px;
        }

        .flow-item {
            background: #667eea;
            color: white;
            padding: 15px 20px;
            border-radius: 5px;
            font-weight: bold;
            text-align: center;
            flex: 1;
            min-width: 150px;
        }

        .flow-arrow {
            font-size: 1.5em;
            color: #667eea;
            font-weight: bold;
        }

        @media (max-width: 768px) {
            header h1 {
                font-size: 1.8em;
            }

            .comparison {
                grid-template-columns: 1fr;
            }

            .flow-chart {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üöÄ AppRoutes.tsx Explained</h1>
            <p>A Complete Guide to React Router & Authentication in Your App</p>
        </header>

        <div class="content">
            <!-- Overview Section -->
            <div class="section">
                <h2>üìã Overview - What is AppRoutes.tsx?</h2>
                <p>
                    The <span class="highlight">AppRoutes.tsx</span> file is the heart of your React application's navigation system. 
                    It's responsible for managing all routes (pages) in your application and ensuring that users can only access 
                    pages they're authorized to see through an authentication guard.
                </p>
                <p>
                    Think of it like a security checkpoint at an airport - only authenticated users can access most routes, 
                    while the login page is freely accessible to everyone.
                </p>
            </div>

            <!-- Key Components Section -->
            <div class="section">
                <h2>üîß Key Components & Their Roles</h2>

                <h3>1. Imports & Dependencies</h3>
                <div class="code-block">
<code>import { Routes, Route, Navigate } from "react-router-dom";
import { lazy, Suspense } from "react";
import { useSelector } from "react-redux";</code>
                </div>
                <ul class="feature-list">
                    <li><strong>react-router-dom:</strong> Provides routing capabilities (Routes, Route, Navigate)</li>
                    <li><strong>React.lazy & Suspense:</strong> Enables code splitting - loads components only when needed</li>
                    <li><strong>useSelector (Redux):</strong> Accesses authentication state from the Redux store</li>
                </ul>

                <h3>2. Lazy-Loaded Components</h3>
                <div class="code-block">
<code>const Sales = lazy(() => import("../pages/Sales/Sales"));
const Products = lazy(() => import("../pages/Products/Products"));
const SaleBoard = lazy(() => import("../pages/SaleBoard/SaleBoard"));
const Profile = lazy(() => import("../pages/Profile/Profile"));</code>
                </div>
                <p>
                    These components are <span class="highlight">lazily loaded</span>, meaning they're only downloaded and parsed 
                    when the user navigates to that route. This significantly improves initial page load time!
                </p>
            </div>

            <!-- Authentication Guard -->
            <div class="section">
                <h2>üîê Authentication Guard: RequireAuth</h2>
                <p>This is the security mechanism of your application:</p>
                <div class="code-block">
<code>function RequireAuth({ children }: { children: JSX.Element }) {
  const isAuth = useSelector((s: RootState) => s.auth.isAuthenticated);

  if (!isAuth) {
    return &lt;Navigate to="/auth/login" replace /&gt;;
  }

  return children;
}</code>
                </div>

                <div class="warning">
                    <strong>‚ö†Ô∏è How it works:</strong><br>
                    1. Checks if user is authenticated from Redux store<br>
                    2. If NOT authenticated ‚Üí Redirects to login page<br>
                    3. If authenticated ‚Üí Allows access to protected content
                </div>

                <div class="diagram">
                    <div class="flow-chart">
                        <div class="flow-item">User Visits Route</div>
                        <div class="flow-arrow">‚Üí</div>
                        <div class="flow-item">Check Authentication</div>
                        <div class="flow-arrow">‚Üí</div>
                        <div class="flow-item">Authenticated?</div>
                    </div>
                    <div class="flow-chart">
                        <div class="flow-item" style="background: #27ae60;">YES ‚Üí Show Page</div>
                        <div class="flow-arrow">    </div>
                        <div class="flow-item" style="background: #e74c3c;">NO ‚Üí Redirect to Login</div>
                    </div>
                </div>
            </div>

            <!-- Route Structure -->
            <div class="section">
                <h2>üó∫Ô∏è Route Structure & Flow</h2>

                <h3>Public vs Protected Routes</h3>
                <div class="comparison">
                    <div class="comparison-box public">
                        <h4><span class="badge public">PUBLIC</span>Login</h4>
                        <p><strong>Path:</strong> /auth/login</p>
                        <p><strong>Protection:</strong> None</p>
                        <p><strong>Access:</strong> Anyone can view</p>
                        <p><strong>Purpose:</strong> User authentication</p>
                    </div>
                    <div class="comparison-box protected">
                        <h4><span class="badge protected">PROTECTED</span>App Routes</h4>
                        <p><strong>Paths:</strong> /sales, /products, etc.</p>
                        <p><strong>Protection:</strong> RequireAuth Guard</p>
                        <p><strong>Access:</strong> Only authenticated users</p>
                        <p><strong>Purpose:</strong> Business operations</p>
                    </div>
                </div>

                <h3>Complete Route List</h3>
                <div class="table-wrapper">
                    <table>
                        <thead>
                            <tr>
                                <th>Route Path</th>
                                <th>Component</th>
                                <th>Protection</th>
                                <th>Description</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>/auth/login</td>
                                <td>Login</td>
                                <td><span class="badge public">PUBLIC</span></td>
                                <td>User login page</td>
                            </tr>
                            <tr>
                                <td>/sales</td>
                                <td>Sales (Lazy)</td>
                                <td><span class="badge protected">PROTECTED</span></td>
                                <td>Sales management</td>
                            </tr>
                            <tr>
                                <td>/products</td>
                                <td>Products (Lazy)</td>
                                <td><span class="badge protected">PROTECTED</span></td>
                                <td>Product management</td>
                            </tr>
                            <tr>
                                <td>/saleboard</td>
                                <td>SaleBoard (Lazy)</td>
                                <td><span class="badge protected">PROTECTED</span></td>
                                <td>Sales dashboard</td>
                            </tr>
                            <tr>
                                <td>/profile</td>
                                <td>Profile (Lazy)</td>
                                <td><span class="badge protected">PROTECTED</span></td>
                                <td>User profile</td>
                            </tr>
                            <tr>
                                <td>/debts</td>
                                <td>DebtManagement</td>
                                <td><span class="badge protected">PROTECTED</span></td>
                                <td>Debt tracking</td>
                            </tr>
                            <tr>
                                <td>/categories</td>
                                <td>CategoryManager</td>
                                <td><span class="badge protected">PROTECTED</span></td>
                                <td>Category management</td>
                            </tr>
                            <tr>
                                <td>/backup</td>
                                <td>DatabaseBackup</td>
                                <td><span class="badge protected">PROTECTED</span></td>
                                <td>Database backup</td>
                            </tr>
                            <tr>
                                <td>/wagons</td>
                                <td>WagonsPage</td>
                                <td><span class="badge protected">PROTECTED</span></td>
                                <td>Wagon management</td>
                            </tr>
                            <tr>
                                <td>/finance</td>
                                <td>FinancePage</td>
                                <td><span class="badge protected">PROTECTED</span></td>
                                <td>Finance operations</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Data Flow Section -->
            <div class="section">
                <h2>üìä Data Flow Explanation</h2>
                <p>Here's how data flows through the authentication system:</p>

                <div class="diagram" style="text-align: left;">
                    <strong style="display: block; margin-bottom: 10px;">1. User navigates to a protected route</strong>
                    <div style="margin: 5px 0;">‚Üí Route matching triggers</div>
                    <strong style="display: block; margin-top: 10px; margin-bottom: 10px;">2. RequireAuth component activates</strong>
                    <div style="margin: 5px 0;">‚Üí Fetches auth state from Redux store</div>
                    <div style="margin: 5px 0;">‚Üí Checks isAuthenticated boolean</div>
                    <strong style="display: block; margin-top: 10px; margin-bottom: 10px;">3. Decision Logic</strong>
                    <div style="margin: 5px 0; color: #27ae60;">‚úì isAuthenticated = true ‚Üí Render child component (Layout + page)</div>
                    <div style="margin: 5px 0; color: #e74c3c;">‚úó isAuthenticated = false ‚Üí Navigate to /auth/login</div>
                    <strong style="display: block; margin-top: 10px; margin-bottom: 10px;">4. Suspense Fallback</strong>
                    <div style="margin: 5px 0;">‚Üí While lazy components load, shows "Loading..." message</div>
                </div>
            </div>

            <!-- Key Features Section -->
            <div class="section">
                <h2>‚ú® Key Features & Benefits</h2>
                <ul class="feature-list">
                    <li><strong>Security:</strong> All app routes are protected by RequireAuth guard - unauthorized users can't access them</li>
                    <li><strong>Code Splitting:</strong> Lazy loading reduces initial bundle size and improves performance</li>
                    <li><strong>Centralized Routing:</strong> All routes defined in one place - easy to manage and maintain</li>
                    <li><strong>Loading State:</strong> Suspense provides feedback while components are loading</li>
                    <li><strong>Automatic Redirects:</strong> Failed auth checks automatically redirect to login</li>
                    <li><strong>Layout Wrapper:</strong> All protected routes share a common Layout component</li>
                </ul>
            </div>

            <!-- Best Practices Section -->
            <div class="section">
                <h2>üí° Best Practices Used Here</h2>
                <div class="tip">
                    <strong>‚úì Tip 1 - Lazy Loading:</strong> 
                    Using React.lazy() for admin pages keeps the bundle size small and improves Time to Interactive (TTI)
                </div>
                <div class="tip">
                    <strong>‚úì Tip 2 - Single Point of Auth:</strong>
                    All authentication logic is centralized in RequireAuth, making it maintainable and testable
                </div>
                <div class="tip">
                    <strong>‚úì Tip 3 - Redux Integration:</strong>
                    Using Redux for auth state ensures consistency across the entire app
                </div>
                <div class="tip">
                    <strong>‚úì Tip 4 - TypeScript Types:</strong>
                    RootState type ensures type-safe Redux access
                </div>
            </div>

            <!-- Potential Issues Section -->
            <div class="section">
                <h2>‚ö†Ô∏è Important Considerations</h2>
                <div class="warning">
                    <strong>Issue 1 - Token Persistence:</strong>
                    When users refresh the page, make sure your Redux auth state rehydrates from localStorage or a session token
                </div>
                <div class="warning">
                    <strong>Issue 2 - Async Auth Check:</strong>
                    If you have async token validation, consider adding a loading state to prevent layout shift
                </div>
                <div class="warning">
                    <strong>Issue 3 - Protected Resources:</strong>
                    Even though routes are protected on frontend, always validate auth on the backend before returning sensitive data
                </div>
            </div>

            <!-- Interactive Section -->
            <div class="section">
                <div class="interactive-section">
                    <h3>üéÆ Interactive Learning</h3>
                    <p>Click the buttons below to see different scenarios:</p>
                    <button class="toggle-button" onclick="toggleContent('scenario1')">Show User Not Logged In Flow</button>
                    <button class="toggle-button" onclick="toggleContent('scenario2')">Show User Logged In Flow</button>
                    <button class="toggle-button" onclick="toggleContent('scenario3')">Show Loading Behavior</button>

                    <div id="scenario1" class="hidden" style="margin-top: 20px; padding: 15px; background: #fef2f2; border-radius: 5px;">
                        <strong>‚ùå User NOT Logged In:</strong>
                        <div class="code-block" style="margin-top: 10px;">
<code>1. User clicks /products link
2. RequireAuth checks: isAuthenticated = false
3. Navigate component triggers
4. User redirected to /auth/login
5. Login page renders for user to enter credentials</code>
                        </div>
                    </div>

                    <div id="scenario2" class="hidden" style="margin-top: 20px; padding: 15px; background: #f0fdf4; border-radius: 5px;">
                        <strong>‚úÖ User IS Logged In:</strong>
                        <div class="code-block" style="margin-top: 10px;">
<code>1. User clicks /products link
2. RequireAuth checks: isAuthenticated = true
3. RequireAuth returns children (Layout + Products page)
4. Layout component renders with navbar, sidebar
5. Products page content displays inside Layout</code>
                        </div>
                    </div>

                    <div id="scenario3" class="hidden" style="margin-top: 20px; padding: 15px; background: #fff3e0; border-radius: 5px;">
                        <strong>‚è≥ While Lazy Component Loads:</strong>
                        <div class="code-block" style="margin-top: 10px;">
<code>1. User navigates to /sales (lazy component)
2. Suspense detected that Sales chunk is loading
3. Fallback shows: "Loading..."
4. Browser downloads Sales component code
5. Component parsed and executed
6. Sales page replaces the loading message</code>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Summary Section -->
            <div class="section">
                <h2>üìù Summary</h2>
                <p>
                    <span class="highlight">AppRoutes.tsx</span> is a crucial file that handles:
                </p>
                <ul class="feature-list">
                    <li><strong>Route Definition:</strong> Maps URL paths to React components</li>
                    <li><strong>Authentication:</strong> Ensures only logged-in users access protected pages</li>
                    <li><strong>Performance:</strong> Uses lazy loading to optimize bundle size</li>
                    <li><strong>User Experience:</strong> Provides loading states and automatic redirects</li>
                    <li><strong>State Management:</strong> Integrates with Redux for persistent auth state</li>
                </ul>
            </div>

        </div>

        <footer>
            <p>üéì Created for learning React routing and authentication patterns ‚Ä¢ Last Updated: January 2026</p>
        </footer>
    </div>

    <script>
        function toggleContent(id) {
            const element = document.getElementById(id);
            
            // Hide all scenarios first
            document.querySelectorAll('[id^="scenario"]').forEach(el => {
                el.classList.add('hidden');
            });

            // Show the clicked scenario
            element.classList.remove('hidden');
        }

        // Add smooth scroll behavior
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Add animation to elements as they come into view
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver(function(entries) {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.animation = 'slideIn 0.6s ease-out';
                }
            });
        }, observerOptions);

        document.querySelectorAll('.section').forEach(section => {
            observer.observe(section);
        });
    </script>
</body>
</html>
